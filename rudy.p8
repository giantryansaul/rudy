pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--Project Rudy
--by Nick Jackson, Ryan Saul, Anne Strickland and David Tran
--Game Title
function _init()
 title_screen()
 -- game_loop()
end

function title_screen()
 _update=title_update
 _draw=title_draw
 num_players=1
 max_players=2
end

function title_update()
 if btnp(2) then num_players-=1 end
 if btnp(3) then num_players+=1 end
 num_players=mid(1,num_players,max_players)
 if btnp(5) then game_loop() end
end

function title_draw()
 cls()
 print("project rudy",35,10,11)
 for i=1,max_players do
  print("players: "..i,40,10*i+30,9)
 end
 print(">",30,10*num_players+30,6)
end
-->8
--Game Loop and objects
function game_loop()
 players={}
 for i=1,num_players do
  add(players,create_player(i))
 end
 players[1].spr=16
 _update=game_update
 _draw=game_draw
end

function create_player(i)
 cs={3,4,7,10,11,12}
 return {x=i*16,y=16,c=cs[i],spr=32}
end
-->8
--Updates
function game_update()
 for i=1,#players do
  if btn(0,i-1) and can_move(players[i],-8,4) then players[i].x-=1 end
  if btn(1,i-1) and can_move(players[i],8,4) then players[i].x+=1 end
  if btn(2,i-1) and can_move(players[i],4,-8) then players[i].y-=1 end
  if btn(3,i-1) and can_move(players[i],4,8) then players[i].y+=1 end
 end
end

function can_move(p,x,y)
  -- get the map tile under the player
  v=mget(flr((p.x+x)/8),flr((p.y+y)/8))
  -- see if its flagged as wall
  return not fget(v,0)
end
-->8
--Draws
function game_draw()
 cls(0,0,0,0,20,20)
 map()
 for i=1,#players do
  p=players[i]
  pal(7,p.c)
  spr(p.spr,p.x,p.y)
  pal()
 end
 pset(64,64,11)
end
-->8
--Utils
__gfx__
00000000177777710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000007cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007007cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770007cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770007cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007007cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000007cccccc10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000711111170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70700707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70700707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70077007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70700707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70700707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000100000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000100000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000010101000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0100000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
